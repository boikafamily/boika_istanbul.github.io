<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>–ü—É—Ç–µ–≤–æ–¥–∏—Ç–µ–ª—å –ø–æ –°—Ç–∞–º–±—É–ª—É</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
/* ...–≤—Å–µ —Å—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π... */
:root {
--background: hsl(30, 50%, 98%);
--foreground: hsl(200, 30%, 15%);
--card: hsl(30, 40%, 99%);
--card-foreground: hsl(200, 30%, 15%);
--primary: hsl(181, 80%, 26%);
--primary-foreground: hsl(30, 50%, 98%);
--secondary: hsl(15, 70%, 62%);
--secondary-foreground: hsl(30, 50%, 98%);
--muted: hsl(30, 20%, 92%);
--muted-foreground: hsl(200, 10%, 45%);
--accent: hsl(40, 80%, 55%);
--border: hsl(30, 20%, 88%);
--gradient-hero: linear-gradient(135deg, hsl(181, 80%, 26%) 0%, hsl(200, 60%, 35%) 100%);
--gradient-warm: linear-gradient(135deg, hsl(15, 70%, 62%) 0%, hsl(40, 80%, 55%) 100%);
--shadow-card: 0 4px 20px -4px hsla(200, 30%, 15%, 0.08);
--shadow-elevated: 0 8px 30px -8px hsla(200, 30%, 15%, 0.15);
--radius: 0.75rem;
}
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}
body {
font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
background-color: var(--background);
color: var(--foreground);
min-height: 100vh;
padding-bottom: 80px;
-webkit-font-smoothing: antialiased;
}
h1, h2, h3 {
font-family: 'Playfair Display', serif;
}
.page {
display: none;
animation: fadeIn 0.3s ease-out;
}
.page.active {
display: block;
}
@keyframes fadeIn {
from { opacity: 0; }
to { opacity: 1; }
}
@keyframes slideUp {
from { opacity: 0; transform: translateY(20px); }
to { opacity: 1; transform: translateY(0); }
}
.animate-slide-up {
animation: slideUp 0.5s ease-out forwards;
}
/* Navigation */
.nav {
position: fixed;
bottom: 0;
left: 0;
right: 0;
background: var(--card);
border-top: 1px solid var(--border);
box-shadow: var(--shadow-elevated);
z-index: 50;
padding-bottom: env(safe-area-inset-bottom);
}
.nav-inner {
display: flex;
justify-content: space-around;
align-items: center;
height: 64px;
max-width: 500px;
margin: 0 auto;
}
.nav-item {
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
padding: 8px 12px;
border-radius: 8px;
cursor: pointer;
transition: all 0.2s;
color: var(--muted-foreground);
text-decoration: none;
}
.nav-item.active {
color: var(--primary);
transform: scale(1.05);
}
.nav-item:hover {
color: var(--primary);
}
.nav-item svg {
width: 20px;
height: 20px;
margin-bottom: 2px;
}
.nav-item span {
font-size: 10px;
font-weight: 500;
}
/* Header */
.header-hero {
background: var(--gradient-hero);
color: var(--primary-foreground);
padding: 32px 16px;
text-align: center;
}
.header-hero.warm {
background: var(--gradient-warm);
}
.header-hero h1 {
font-size: 1.875rem;
font-weight: 700;
}
.header-hero p {
margin-top: 8px;
opacity: 0.8;
}
/* Hero Section */
.hero {
position: relative;
height: 50vh;
background: var(--gradient-hero);
display: flex;
align-items: center;
justify-content: center;
overflow: hidden;
}
.hero-bg {
position: absolute;
inset: 0;
background: url('https://images.unsplash.com/photo-1524231757912-21f4fe3a7200?w=1200') center/cover;
opacity: 0.3;
}
.hero-content {
position: relative;
z-index: 10;
text-align: center;
padding: 24px;
animation: slideUp 0.5s ease-out;
}
.hero-content h1 {
font-size: 2.25rem;
font-weight: 700;
color: var(--primary-foreground);
margin-bottom: 16px;
}
.hero-content p {
font-size: 1.125rem;
color: var(--primary-foreground);
opacity: 0.9;
max-width: 500px;
}
@media (min-width: 768px) {
.hero-content h1 { font-size: 3.5rem; }
}
/* Cards */
.card {
background: var(--card);
border-radius: 16px;
padding: 24px;
box-shadow: var(--shadow-card);
}
.card-elevated {
box-shadow: var(--shadow-elevated);
}
.cards-grid {
display: grid;
grid-template-columns: 1fr;
gap: 16px;
padding: 16px;
max-width: 900px;
margin: 0 auto;
}
@media (min-width: 768px) {
.cards-grid { grid-template-columns: repeat(2, 1fr); }
.cards-grid .card-full { grid-column: span 2; }
}
.cards-offset {
margin-top: -48px;
position: relative;
z-index: 20;
}
.card-header {
display: flex;
align-items: center;
gap: 12px;
margin-bottom: 12px;
}
.card-icon {
width: 40px;
height: 40px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
}
.card-icon.primary { background: hsla(181, 80%, 26%, 0.1); color: var(--primary); }
.card-icon.secondary { background: hsla(15, 70%, 62%, 0.2); color: var(--secondary); }
.card-icon.accent { background: hsla(40, 80%, 55%, 0.2); color: var(--accent); }
.card-title {
font-size: 1.125rem;
font-weight: 600;
}
.text-muted {
color: var(--muted-foreground);
}
.text-sm {
font-size: 0.875rem;
}
.text-xs {
font-size: 0.75rem;
}
/* Info Rows */
.info-row {
display: flex;
justify-content: space-between;
padding: 8px 0;
}
.info-row .value {
font-weight: 500;
color: var(--foreground);
}
/* Info Pills */
.info-pill {
display: flex;
align-items: center;
gap: 12px;
padding: 12px;
background: var(--muted);
border-radius: 8px;
margin-bottom: 8px;
}
/* Section */
.section {
padding: 48px 16px;
max-width: 900px;
margin: 0 auto;
}
.section-title {
font-size: 1.5rem;
font-weight: 700;
text-align: center;
margin-bottom: 24px;
}
/* Trip Overview */
.trip-grid {
display: grid;
grid-template-columns: repeat(2, 1fr);
gap: 16px;
}
@media (min-width: 768px) {
.trip-grid { grid-template-columns: repeat(4, 1fr); }
}
.trip-card {
background: var(--card);
border-radius: 12px;
padding: 16px;
text-align: center;
box-shadow: var(--shadow-card);
transition: box-shadow 0.2s;
cursor: pointer;
}
.trip-card:hover {
box-shadow: var(--shadow-elevated);
}
.trip-card .emoji {
font-size: 2rem;
margin-bottom: 8px;
}
.trip-card .day {
font-size: 0.75rem;
color: var(--muted-foreground);
}
.trip-card .title {
font-size: 0.875rem;
font-weight: 500;
}
/* Day Accordion */
.day-list {
max-width: 700px;
margin: 0 auto;
padding: 24px 16px;
}
.day-card {
background: var(--card);
border-radius: 16px;
box-shadow: var(--shadow-card);
margin-bottom: 16px;
overflow: hidden;
}
.day-header {
display: flex;
align-items: center;
justify-content: space-between;
padding: 16px;
cursor: pointer;
transition: background 0.2s;
}
.day-header:hover {
background: var(--muted);
}
.day-header-left {
display: flex;
align-items: center;
gap: 12px;
}
.day-header .emoji {
font-size: 2rem;
}
.day-header .day-label {
font-size: 0.75rem;
color: var(--muted-foreground);
}
.day-header .day-title {
font-weight: 600;
}
.day-header-right {
display: flex;
align-items: center;
gap: 12px;
}
.day-progress-text {
text-align: right;
}
.day-progress-text .label {
font-size: 0.75rem;
color: var(--muted-foreground);
}
.day-progress-text .value {
font-size: 0.875rem;
font-weight: 500;
}
.chevron {
width: 20px;
height: 20px;
color: var(--muted-foreground);
transition: transform 0.2s;
}
.day-card.expanded .chevron {
transform: rotate(180deg);
}
.day-progress-bar {
height: 4px;
background: var(--muted);
}
.day-progress-bar .fill {
height: 100%;
background: var(--gradient-warm);
transition: width 0.5s;
}
.day-content {
display: none;
padding: 16px;
padding-top: 8px;
}
.day-card.expanded .day-content {
display: block;
}
.route-box {
background: hsla(181, 80%, 26%, 0.05);
border-left: 4px solid var(--primary);
border-radius: 8px;
padding: 12px;
margin-bottom: 16px;
}
.route-box .route-label {
font-size: 0.875rem;
font-weight: 500;
color: var(--primary);
margin-bottom: 4px;
}
.route-box .route-text {
font-size: 0.875rem;
color: var(--muted-foreground);
}
/* Attraction Item */
.attraction {
position: relative;
border-radius: 12px;
padding: 16px;
border: 1px solid var(--border);
margin-bottom: 12px;
display: flex;
gap: 12px;
transition: all 0.2s;
}
.attraction.visited {
background: hsla(181, 80%, 26%, 0.05);
border-color: hsla(181, 80%, 26%, 0.3);
}
.attraction-checkbox {
width: 24px;
height: 24px;
border-radius: 50%;
border: 2px solid var(--muted-foreground);
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
flex-shrink: 0;
transition: all 0.2s;
}
.attraction-checkbox:hover {
border-color: var(--primary);
}
.attraction.visited .attraction-checkbox {
background: var(--primary);
border-color: var(--primary);
}
.attraction-checkbox svg {
width: 14px;
height: 14px;
color: var(--primary-foreground);
display: none;
}
.attraction.visited .attraction-checkbox svg {
display: block;
}
.attraction-content {
flex: 1;
min-width: 0;
}
.attraction-name {
font-weight: 500;
margin-bottom: 4px;
}
.attraction.visited .attraction-name {
text-decoration: line-through;
color: var(--muted-foreground);
}
.attraction-meta {
display: flex;
align-items: center;
gap: 16px;
font-size: 0.875rem;
color: var(--muted-foreground);
margin-top: 4px;
}
.attraction-meta svg {
width: 14px;
height: 14px;
}
.attraction-desc {
font-size: 0.875rem;
color: var(--muted-foreground);
margin-top: 8px;
}
.attraction-link {
display: inline-flex;
align-items: center;
gap: 4px;
font-size: 0.875rem;
color: var(--primary);
text-decoration: none;
margin-top: 8px;
}
.attraction-link:hover {
text-decoration: underline;
}
.attraction-link svg {
width: 14px;
height: 14px;
}
/* Restaurant & Shop Cards */
.list-container {
max-width: 700px;
margin: 0 auto;
padding: 16px;
}
.list-card {
background: var(--card);
border-radius: 16px;
padding: 20px;
box-shadow: var(--shadow-card);
margin-bottom: 16px;
transition: box-shadow 0.2s;
}
.list-card:hover {
box-shadow: var(--shadow-elevated);
}
.list-card-header {
display: flex;
justify-content: space-between;
align-items: flex-start;
margin-bottom: 12px;
}
.list-card-title {
font-size: 1.125rem;
font-weight: 600;
}
.list-card-subtitle {
font-size: 0.875rem;
color: var(--muted-foreground);
}
.rating-badge {
display: flex;
align-items: center;
gap: 4px;
background: hsla(40, 80%, 55%, 0.2);
padding: 4px 8px;
border-radius: 8px;
font-size: 0.875rem;
font-weight: 500;
}
.rating-badge svg {
width: 16px;
height: 16px;
fill: var(--accent);
color: var(--accent);
}
.list-card-desc {
font-size: 0.875rem;
color: var(--muted-foreground);
margin-bottom: 12px;
}
.must-try {
background: hsla(181, 80%, 26%, 0.05);
border-radius: 8px;
padding: 8px 12px;
font-size: 0.875rem;
margin-bottom: 12px;
}
.tip-box {
background: hsla(181, 80%, 26%, 0.05);
border-radius: 8px;
padding: 8px 12px;
font-size: 0.875rem;
margin-bottom: 12px;
}
.list-card-footer {
display: flex;
justify-content: space-between;
align-items: center;
flex-wrap: wrap;
gap: 8px;
}
.list-card-tags {
display: flex;
align-items: center;
gap: 12px;
}
.tag {
display: inline-flex;
align-items: center;
gap: 4px;
font-size: 0.75rem;
background: var(--muted);
padding: 4px 8px;
border-radius: 999px;
}
.tag svg {
width: 12px;
height: 12px;
}
.price-tag {
color: var(--primary);
display: flex;
}
.price-tag svg {
width: 16px;
height: 16px;
}
.map-link {
display: inline-flex;
align-items: center;
gap: 4px;
font-size: 0.875rem;
color: var(--primary);
text-decoration: none;
}
.map-link:hover {
text-decoration: underline;
}
.map-link svg {
width: 12px;
height: 12px;
}
/* Legend */
.legend {
background: var(--card);
border-radius: 12px;
padding: 12px;
box-shadow: var(--shadow-card);
display: flex;
align-items: center;
justify-content: center;
gap: 24px;
font-size: 0.875rem;
margin-bottom: 16px;
}
.legend-item {
display: flex;
align-items: center;
gap: 4px;
}
/* Tips Box */
.tips-box {
background: hsla(40, 80%, 55%, 0.1);
border-left: 4px solid var(--accent);
border-radius: 8px;
padding: 16px;
margin-bottom: 16px;
}
.tips-box h3 {
font-size: 1rem;
font-weight: 600;
margin-bottom: 8px;
}
.tips-box ul {
font-size: 0.875rem;
color: var(--muted-foreground);
padding-left: 0;
list-style: none;
}
.tips-box li {
margin-bottom: 4px;
}
/* Converter */
.converter-container {
max-width: 450px;
margin: 0 auto;
padding: 24px 16px;
}
.rate-info {
background: var(--card);
border-radius: 16px;
padding: 16px;
box-shadow: var(--shadow-card);
margin-bottom: 24px;
}
.rate-info h3 {
font-size: 0.875rem;
font-weight: 500;
color: var(--muted-foreground);
margin-bottom: 12px;
}
.rate-grid {
display: grid;
grid-template-columns: repeat(2, 1fr);
gap: 12px;
}
.rate-item {
background: var(--muted);
border-radius: 8px;
padding: 12px;
}
.rate-item .from {
font-size: 0.875rem;
color: var(--muted-foreground);
}
.rate-item .to {
font-weight: 600;
}
.calculator {
background: var(--card);
border-radius: 16px;
padding: 24px;
box-shadow: var(--shadow-elevated);
}
.calc-input-group {
margin-bottom: 24px;
}
.calc-label {
font-size: 0.875rem;
font-weight: 500;
color: var(--muted-foreground);
margin-bottom: 8px;
display: block;
}
.calc-input {
width: 100%;
font-size: 1.875rem;
font-weight: 700;
background: var(--muted);
border: none;
border-radius: 12px;
padding: 16px;
text-align: center;
outline: none;
}
.calc-input:focus {
box-shadow: 0 0 0 2px var(--primary);
}
.quick-amounts {
display: flex;
flex-wrap: wrap;
gap: 8px;
justify-content: center;
margin-bottom: 24px;
}
.quick-btn {
padding: 8px 16px;
border-radius: 999px;
font-size: 0.875rem;
font-weight: 500;
background: var(--muted);
border: none;
cursor: pointer;
transition: all 0.2s;
}
.quick-btn:hover {
background: hsla(181, 80%, 26%, 0.1);
}
.quick-btn.active {
background: var(--primary);
color: var(--primary-foreground);
}
.currency-row {
display: flex;
align-items: center;
gap: 16px;
margin-bottom: 24px;
}
.currency-select-wrapper {
flex: 1;
}
.currency-select-wrapper label {
font-size: 0.75rem;
color: var(--muted-foreground);
display: block;
margin-bottom: 4px;
}
.currency-select {
width: 100%;
background: var(--muted);
border: none;
border-radius: 12px;
padding: 12px 16px;
font-weight: 500;
outline: none;
cursor: pointer;
appearance: none;
}
.currency-select:focus {
box-shadow: 0 0 0 2px var(--primary);
}
.swap-btn {
width: 48px;
height: 48px;
background: hsla(181, 80%, 26%, 0.1);
border: none;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
margin-top: 16px;
transition: background 0.2s;
}
.swap-btn:hover {
background: hsla(181, 80%, 26%, 0.2);
}
.swap-btn svg {
width: 20px;
height: 20px;
color: var(--primary);
}
.result-box {
background: var(--gradient-hero);
border-radius: 12px;
padding: 24px;
text-align: center;
}
.result-label {
font-size: 0.875rem;
color: var(--primary-foreground);
opacity: 0.8;
margin-bottom: 4px;
}
.result-value {
font-size: 2.25rem;
font-weight: 700;
color: var(--primary-foreground);
}
.result-detail {
font-size: 0.875rem;
color: var(--primary-foreground);
opacity: 0.6;
margin-top: 8px;
}
.disclaimer {
text-align: center;
font-size: 0.75rem;
color: var(--muted-foreground);
margin-top: 16px;
display: flex;
align-items: center;
justify-content: center;
gap: 4px;
}
.disclaimer svg {
width: 12px;
height: 12px;
}
/* Expenses */
.expenses-container {
max-width: 700px;
margin: 0 auto;
padding: 24px 16px;
}
.total-card {
background: var(--card);
border-radius: 16px;
padding: 20px;
box-shadow: var(--shadow-elevated);
margin-bottom: 24px;
}
.total-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 16px;
}
.total-info {
display: flex;
align-items: center;
gap: 12px;
}
.total-icon {
width: 40px;
height: 40px;
border-radius: 50%;
background: hsla(15, 70%, 62%, 0.2);
display: flex;
align-items: center;
justify-content: center;
}
.total-icon svg {
width: 20px;
height: 20px;
color: var(--secondary);
}
.total-label {
font-size: 0.875rem;
color: var(--muted-foreground);
}
.total-value {
font-size: 1.5rem;
font-weight: 700;
}
.add-btn {
width: 48px;
height: 48px;
background: var(--primary);
border: none;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
box-shadow: var(--shadow-elevated);
transition: opacity 0.2s;
}
.add-btn:hover {
opacity: 0.9;
}
.add-btn svg {
width: 24px;
height: 24px;
color: var(--primary-foreground);
}
.category-tags {
display: flex;
flex-wrap: wrap;
gap: 8px;
}
.category-tag {
font-size: 0.75rem;
padding: 4px 8px;
border-radius: 999px;
}
.category-tag.food { background: #fed7aa; color: #9a3412; }
.category-tag.transport { background: #bfdbfe; color: #1e40af; }
.category-tag.tickets { background: #e9d5ff; color: #6b21a8; }
.category-tag.shopping { background: #fbcfe8; color: #9d174d; }
.category-tag.accommodation { background: #bbf7d0; color: #166534; }
.category-tag.other { background: #e5e7eb; color: #374151; }
/* Empty State */
.empty-state {
text-align: center;
padding: 48px 16px;
}
.empty-state p {
color: var(--muted-foreground);
margin-bottom: 16px;
}
.empty-btn {
display: inline-flex;
align-items: center;
gap: 8px;
padding: 12px 24px;
background: var(--primary);
color: var(--primary-foreground);
border: none;
border-radius: 12px;
font-weight: 500;
cursor: pointer;
transition: opacity 0.2s;
}
.empty-btn:hover {
opacity: 0.9;
}
.empty-btn svg {
width: 20px;
height: 20px;
}
/* Expense List */
.expense-date-group {
margin-bottom: 24px;
}
.expense-date {
font-size: 0.875rem;
font-weight: 500;
color: var(--muted-foreground);
margin-bottom: 12px;
}
.expense-item {
background: var(--card);
border-radius: 12px;
padding: 16px;
box-shadow: var(--shadow-card);
display: flex;
align-items: center;
justify-content: space-between;
margin-bottom: 8px;
}
.expense-left {
display: flex;
align-items: center;
gap: 12px;
}
.expense-icon {
width: 40px;
height: 40px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
font-size: 1.25rem;
}
.expense-amount {
font-weight: 500;
}
.expense-desc {
font-size: 0.875rem;
color: var(--muted-foreground);
}
.delete-btn, .edit-btn {
width: 32px;
height: 32px;
background: transparent;
border: none;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
transition: background 0.2s;
}
.delete-btn:hover {
background: hsla(0, 84%, 60%, 0.1);
}
.delete-btn svg {
width: 16px;
height: 16px;
color: hsl(0, 84%, 60%);
}
.edit-btn:hover {
background: hsla(181, 80%, 26%, 0.1);
}
.edit-btn svg {
width: 16px;
height: 16px;
color: var(--primary);
}
/* Modal */
.modal-overlay {
position: fixed;
inset: 0;
background: rgba(0, 0, 0, 0.5);
z-index: 100;
display: none;
align-items: flex-end;
justify-content: center;
padding: 16px;
}
.modal-overlay.active {
display: flex;
}
@media (min-width: 640px) {
.modal-overlay { align-items: center; }
}
.modal {
background: var(--card);
border-radius: 24px 24px 0 0;
width: 100%;
max-width: 450px;
padding: 24px;
animation: slideUp 0.3s ease-out;
}
@media (min-width: 640px) {
.modal { border-radius: 16px; }
}
.modal h3 {
font-size: 1.25rem;
font-weight: 700;
margin-bottom: 16px;
}
.form-group {
margin-bottom: 16px;
}
.form-label {
font-size: 0.875rem;
color: var(--muted-foreground);
display: flex;
align-items: center;
gap: 4px;
margin-bottom: 4px;
}
.form-label svg {
width: 16px;
height: 16px;
}
.form-input {
width: 100%;
background: var(--muted);
border: none;
border-radius: 12px;
padding: 12px 16px;
font-size: 1rem;
outline: none;
}
.form-input:focus {
box-shadow: 0 0 0 2px var(--primary);
}
.form-row {
display: flex;
gap: 12px;
}
.form-row > * {
flex: 1;
}
.form-row .currency-wrapper {
width: 120px;
flex: none;
}
.category-grid {
display: grid;
grid-template-columns: repeat(3, 1fr);
gap: 8px;
}
.category-btn {
padding: 8px 12px;
border-radius: 12px;
font-size: 0.875rem;
font-weight: 500;
background: var(--muted);
border: none;
cursor: pointer;
transition: all 0.2s;
}
.category-btn:hover {
background: hsla(181, 80%, 26%, 0.1);
}
.category-btn.active {
background: var(--primary);
color: var(--primary-foreground);
}
.modal-actions {
display: flex;
gap: 12px;
margin-top: 24px;
}
.modal-actions button {
flex: 1;
padding: 12px;
border-radius: 12px;
font-weight: 500;
cursor: pointer;
transition: all 0.2s;
}
.cancel-btn {
background: transparent;
border: 1px solid var(--border);
}
.cancel-btn:hover {
background: var(--muted);
}
.submit-btn {
background: var(--primary);
color: var(--primary-foreground);
border: none;
}
.submit-btn:hover {
opacity: 0.9;
}
/* Shop Icon */
.shop-icon {
width: 40px;
height: 40px;
border-radius: 50%;
background: hsla(181, 80%, 26%, 0.1);
display: flex;
align-items: center;
justify-content: center;
}
.shop-icon svg {
width: 20px;
height: 20px;
color: var(--primary);
}
.list-card-header-with-icon {
display: flex;
align-items: center;
gap: 12px;
}
/* Status Messages */
.status-message {
position: fixed;
top: 20px;
left: 50%;
transform: translateX(-50%);
background: var(--primary);
color: var(--primary-foreground);
padding: 12px 24px;
border-radius: 12px;
box-shadow: var(--shadow-elevated);
z-index: 1000;
animation: slideDown 0.3s ease-out;
display: none;
}
@keyframes slideDown {
from { opacity: 0; transform: translateX(-50%) translateY(-20px); }
to { opacity: 1; transform: translateX(-50%) translateY(0); }
}
</style>
</head>
<body>
<!-- Status Message -->
<div id="status-message" class="status-message"></div>

<!-- ... –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ... -->

<!-- ADD EXPENSE MODAL -->
<div class="modal-overlay" id="expense-modal">
<div class="modal">
<h3 id="modal-title">–ù–æ–≤—ã–π —Ä–∞—Å—Ö–æ–¥</h3>
<input type="hidden" id="expense-id">
<div class="form-group">
<label class="form-label">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>
–î–∞—Ç–∞
</label>
<input type="date" id="expense-date" class="form-input">
</div>
<div class="form-group">
<div class="form-row">
<div>
<label class="form-label">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="12" x="2" y="6" rx="2"/><circle cx="12" cy="12" r="2"/><path d="M6 12h.01M18 12h.01"/></svg>
–°—É–º–º–∞
</label>
<input type="number" id="expense-amount" class="form-input" placeholder="0.00">
</div>
<div class="currency-wrapper">
<label class="form-label">–í–∞–ª—é—Ç–∞</label>
<select id="expense-currency" class="form-input">
<option value="TRY">üáπüá∑ TRY</option>
<option value="BYN">üáßüáæ BYN</option>
<option value="EUR">üá™üá∫ EUR</option>
<option value="USD">üá∫üá∏ USD</option>
</select>
</div>
</div>
</div>
<div class="form-group">
<label class="form-label">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z"/><path d="M7 7h.01"/></svg>
–ö–∞—Ç–µ–≥–æ—Ä–∏—è
</label>
<div class="category-grid" id="category-grid"></div>
</div>
<div class="form-group">
<label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
<input type="text" id="expense-desc" class="form-input" placeholder="–ß—Ç–æ –∫—É–ø–∏–ª–∏...">
</div>
<div class="modal-actions">
<button class="cancel-btn" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
<button class="submit-btn" onclick="saveExpense()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
</div>
</div>
</div>

<!-- ... –æ—Å—Ç–∞–ª—å–Ω–æ–π HTML –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ... -->

<script>
// ============= DATA =============
const travelDays = [ /* ...–æ—Å—Ç–∞—ë—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π... */ ];
const restaurants = [ /* ... */ ];
const shops = [ /* ... */ ];
const categories = { /* ... */ };
const currencySymbols = { TRY: "‚Ç∫", BYN: "Br", EUR: "‚Ç¨", USD: "$" };
const toBYN = { TRY: 0.065, BYN: 1, EUR: 3.5, USD: 3.2 };
const ratesFromTRY = { TRY: 1, BYN: 0.065, EUR: 0.032, USD: 0.035 };

// ============= STATE =============
let visited = JSON.parse(localStorage.getItem('istanbul-visited') || '{}');
let expenses = JSON.parse(localStorage.getItem('istanbul-expenses') || '[]');
let expandedDay = 0;
let selectedCategory = 'food';
let supabaseClient = null;

// ============= SUPABASE =============
function initSupabase() {
  if (typeof supabase !== 'undefined' && supabase.createClient) {
    try {
      supabaseClient = supabase.createClient(
        'https://yjithstkzcvcycmrfqet.supabase.co',
        'sb_publishable_-3Ipd2kAASwMYidT-kEoeg_6X07zYkl'
      );
      console.log('Supabase –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Supabase:', error);
    }
  } else {
    console.warn('Supabase JS –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω. –ò—Å–ø–æ–ª—å–∑—É–µ–º localStorage.');
  }
}

// ============= UTILS =============
function showStatus(message, type = 'success') {
  const el = document.getElementById('status-message');
  if (!el) return;
  el.textContent = message;
  el.style.display = 'block';
  el.style.background = type === 'success' ? 'var(--primary)' : 'hsl(0, 84%, 60%)';
  setTimeout(() => el.style.display = 'none', 3000);
}

// ============= NAVIGATION =============
function showPage(pageName) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  const pageEl = document.getElementById('page-' + pageName);
  const navEl = document.querySelector(`.nav-item[data-page="${pageName}"]`);
  if (pageEl) pageEl.classList.add('active');
  if (navEl) navEl.classList.add('active');
  window.scrollTo(0, 0);
  if (pageName === 'expenses') loadExpenses();
}

// ============= EXPENSES =============
async function loadExpenses() {
  try {
    if (supabaseClient) {
      const { data, error } = await supabaseClient
        .from('expenses')
        .select('*')
        .order('date', { ascending: false });
      if (error) throw error;
      expenses = data || [];
      showStatus('–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ –±–∞–∑—ã');
    } else {
      const local = localStorage.getItem('istanbul-expenses');
      expenses = local ? JSON.parse(local) : [];
    }
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);
    const local = localStorage.getItem('istanbul-expenses');
    expenses = local ? JSON.parse(local) : [];
  }
  renderExpenses();
}

function renderExpenses() {
  const totalEl = document.getElementById('total-spent');
  const catEl = document.getElementById('category-breakdown');
  const listEl = document.getElementById('expenses-list');
  if (!totalEl || !catEl || !listEl) return;

  const totalBYN = expenses.reduce((sum, e) => sum + e.amount * toBYN[e.currency], 0);
  totalEl.textContent = `${totalBYN.toFixed(2)} BYN`;

  const byCat = expenses.reduce((acc, e) => {
    if (!acc[e.category]) acc[e.category] = 0;
    acc[e.category] += e.amount * toBYN[e.currency];
    return acc;
  }, {});
  catEl.innerHTML = Object.entries(byCat)
    .map(([cat, amt]) => `<span class="category-tag ${cat}">${categories[cat].emoji} ${amt.toFixed(0)} BYN</span>`)
    .join('');

  const byDate = expenses.reduce((acc, e) => {
    if (!acc[e.date]) acc[e.date] = [];
    acc[e.date].push(e);
    return acc;
  }, {});
  const dates = Object.keys(byDate).sort((a, b) => new Date(b) - new Date(a));

  if (dates.length === 0) {
    listEl.innerHTML = `
      <div class="empty-state">
        <p>–ü–æ–∫–∞ –Ω–µ—Ç —Ä–∞—Å—Ö–æ–¥–æ–≤</p>
        <button class="empty-btn" onclick="openModal()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
          –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—ã–π —Ä–∞—Å—Ö–æ–¥
        </button>
      </div>
    `;
    return;
  }

  listEl.innerHTML = dates.map(date => `
    <div class="expense-date-group">
      <p class="expense-date">${formatDate(date)}</p>
      ${byDate[date].map(e => `
        <div class="expense-item">
          <div class="expense-left">
            <div class="expense-icon category-tag ${e.category}">${categories[e.category].emoji}</div>
            <div>
              <p class="expense-amount">${currencySymbols[e.currency]} ${e.amount.toFixed(2)}</p>
              <p class="expense-desc">${e.description || categories[e.category].label}</p>
            </div>
          </div>
          <div style="display: flex; gap: 8px;">
            <button class="delete-btn" onclick="deleteExpense('${e.id}')">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>
            </button>
            <button class="edit-btn" onclick="editExpense('${e.id}')">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="14 2 18 6 7 17 3 18 4 14 15 3"/><line x1="3" x2="21" y1="21" y2="3"/></svg>
            </button>
          </div>
        </div>
      `).join('')}
    </div>
  `).join('');
}

function formatDate(dateStr) {
  const d = new Date(dateStr);
  const days = ['–≤—Å', '–ø–Ω', '–≤—Ç', '—Å—Ä', '—á—Ç', '–ø—Ç', '—Å–±'];
  const months = ['—è–Ω–≤', '—Ñ–µ–≤', '–º–∞—Ä', '–∞–ø—Ä', '–º–∞–π', '–∏—é–Ω', '–∏—é–ª', '–∞–≤–≥', '—Å–µ–Ω', '–æ–∫—Ç', '–Ω–æ—è', '–¥–µ–∫'];
  return `${days[d.getDay()]}, ${d.getDate()} ${months[d.getMonth()]}`;
}

function openModal(expense = null) {
  const today = new Date().toISOString().split('T')[0];
  const modalTitle = document.getElementById('modal-title');
  const idInput = document.getElementById('expense-id');

  if (expense) {
    // –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    modalTitle.textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥';
    idInput.value = expense.id;
    document.getElementById('expense-date').value = expense.date;
    document.getElementById('expense-amount').value = expense.amount;
    document.getElementById('expense-currency').value = expense.currency;
    document.getElementById('expense-desc').value = expense.description || '';
    selectedCategory = expense.category;
  } else {
    // –ù–æ–≤—ã–π —Ä–∞—Å—Ö–æ–¥
    modalTitle.textContent = '–ù–æ–≤—ã–π —Ä–∞—Å—Ö–æ–¥';
    idInput.value = '';
    document.getElementById('expense-date').value = today;
    document.getElementById('expense-amount').value = '';
    document.getElementById('expense-currency').value = 'TRY';
    document.getElementById('expense-desc').value = '';
    selectedCategory = 'food';
  }

  renderCategoryGrid();
  document.getElementById('expense-modal').classList.add('active');
}

function closeModal() {
  document.getElementById('expense-modal').classList.remove('active');
}

function editExpense(id) {
  const expense = expenses.find(e => e.id === id);
  if (expense) openModal(expense);
}

function selectCategory(cat) {
  selectedCategory = cat;
  renderCategoryGrid();
}

function renderCategoryGrid() {
  const grid = document.getElementById('category-grid');
  if (!grid) return;
  grid.innerHTML = Object.entries(categories)
    .map(([key, val]) => `
      <button class="category-btn ${selectedCategory === key ? 'active' : ''}" onclick="selectCategory('${key}')">
        ${val.emoji} ${val.label}
      </button>
    `).join('');
}

async function saveExpense() {
  const id = document.getElementById('expense-id').value;
  const amount = parseFloat(document.getElementById('expense-amount').value);
  if (!amount || amount <= 0) {
    showStatus('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—É–º–º—É', 'error');
    return;
  }

  const expense = {
    date: document.getElementById('expense-date').value,
    amount: amount,
    currency: document.getElementById('expense-currency').value,
    category: selectedCategory,
    description: document.getElementById('expense-desc').value.trim() || null
  };

  try {
    if (supabaseClient) {
      let query;
      if (id) {
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
        query = supabaseClient
          .from('expenses')
          .update(expense)
          .eq('id', id);
      } else {
        // –°–æ–∑–¥–∞–Ω–∏–µ ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º user_id –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
        expense.user_id = 'default_user';
        query = supabaseClient
          .from('expenses')
          .insert([expense])
          .select();
      }
      const { data, error } = await query;
      if (error) throw error;

      if (id) {
        const idx = expenses.findIndex(e => e.id === id);
        if (idx !== -1) expenses[idx] = { ...expenses[idx], ...expense };
        showStatus('–†–∞—Å—Ö–æ–¥ –æ–±–Ω–æ–≤–ª—ë–Ω!');
      } else {
        expenses.unshift(data[0]);
        showStatus('–†–∞—Å—Ö–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω!');
      }
    } else {
      // –¢–æ–ª—å–∫–æ localStorage
      if (id) {
        const idx = expenses.findIndex(e => e.id === id);
        if (idx !== -1) expenses[idx] = { ...expenses[idx], ...expense, id };
      } else {
        expense.id = Date.now().toString();
        expenses.unshift(expense);
      }
      showStatus('–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ');
    }

    localStorage.setItem('istanbul-expenses', JSON.stringify(expenses));
    renderExpenses();
    closeModal();
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', error);
    showStatus('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è', 'error');
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ –∫–∞–∫ fallback
    if (!id) expense.id = Date.now().toString();
    expenses.unshift(expense);
    localStorage.setItem('istanbul-expenses', JSON.stringify(expenses));
    renderExpenses();
    closeModal();
  }
}

async function deleteExpense(id) {
  if (!confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ä–∞—Å—Ö–æ–¥?')) return;
  try {
    if (supabaseClient) {
      const { error } = await supabaseClient
        .from('expenses')
        .delete()
        .eq('id', id);
      if (error) throw error;
    }
    expenses = expenses.filter(e => e.id !== id);
    localStorage.setItem('istanbul-expenses', JSON.stringify(expenses));
    renderExpenses();
    showStatus('–†–∞—Å—Ö–æ–¥ —É–¥–∞–ª—ë–Ω');
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:', error);
    showStatus('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è', 'error');
    expenses = expenses.filter(e => e.id !== id);
    localStorage.setItem('istanbul-expenses', JSON.stringify(expenses));
    renderExpenses();
  }
}

// ============= –û–°–¢–ê–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò =============
// renderDays(), toggleDay(), toggleVisited(), renderRestaurants(), renderShops(),
// setupConverter(), setAmount(), swapCurrencies(), updateConverter()
// ‚Äî –æ—Å—Ç–∞—é—Ç—Å—è **–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π**

// ============= INIT =============
document.addEventListener('DOMContentLoaded', () => {
  try {
    const v = localStorage.getItem('istanbul-visited');
    const e = localStorage.getItem('istanbul-expenses');
    if (v) visited = JSON.parse(v);
    if (e) expenses = JSON.parse(e);
  } catch (err) {
    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', err);
  }

  setTimeout(initSupabase, 100);
  renderDays();
  renderRestaurants();
  renderShops();
  setupConverter();
  renderCategoryGrid();
  renderExpenses();

  const script = document.createElement('script');
  script.async = true;
  script.src = '//nuipogoda.ru/informer/nuipogoda.js';
  document.body.appendChild(script);
});

// –ó–∞–≥—Ä—É–∑–∫–∞ Supabase SDK
(function() {
  const s = document.createElement('script');
  s.src = 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js';
  s.async = true;
  s.onload = () => typeof initSupabase === 'function' && initSupabase();
  document.head.appendChild(s);
})();
</script>
</body>
</html>
